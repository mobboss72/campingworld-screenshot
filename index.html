<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CW Compliance Capture Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* All your original CSS here — keeping unchanged */
    /* ...TRUNCATED for brevity... (unchanged from original index-2.html) */
    .feature-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
    }
    .spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      display: inline-block;
      margin-right: 12px;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">CW Compliance</div>
      <nav class="nav-links">
        <a href="#how-it-works">How It Works</a>
        <a href="/history">History</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <h1>Automatic Screenshot Capture</h1>
        <p class="subtitle">Automated Screenshots for CW RV listings with cryptographic timestamps and verification</p>
      </div>
    </section>

    <section class="container">
      <div class="capture-section">
        <h2>Run Capture</h2>
        <p class="section-description">Enter a CW RV stock number and select your location. The system will spoof GPS coordinates and ZIP codes to match the selected CW location, then capture pricing details with full legal documentation including cryptographic timestamps.</p>

        <form method="POST" action="/capture" id="captureForm">
          <div class="form-group">
            <label for="location">CW Location</label>
            <select name="location" id="location" required>
              <option value="bend">Bend, OR (97701)</option>
              <option value="eugene">Eugene, OR (97402)</option>
              <option value="hillsboro">Hillsboro, OR (97124)</option>
              <option value="medford">Medford, OR (97504)</option>
              <option value="portland" selected>Portland, OR (97201)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="stock">Stock Number</label>
            <input type="text" name="stock" id="stock" placeholder="2607628P" required pattern="[a-zA-Z0-9]+" title="Please enter a stock number (e.g., 2607628P)">
          </div>

          <button type="submit" id="submitBtn">Run Capture</button>
        </form>

        <div class="loading" id="loading">
          <span class="spinner"></span>
          Capturing screenshots and generating PDF... This may take 30-60 seconds.
        </div>
      </div>

      <div class="features">
        <div class="feature-card">
          <div class="feature-icon">
            <!-- Lock SVG -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="24" height="24">
              <path d="M12 1a5 5 0 00-5 5v4H6a2 2 0 00-2 2v9a2 2 0 002 2h12a2 2 0 002-2v-9a2 2 0 00-2-2h-1V6a5 5 0 00-5-5zm-3 5a3 3 0 116 0v4H9V6zm3 7a2 2 0 110 4 2 2 0 010-4z"/>
            </svg>
          </div>
          <h3>Legally Verifiable</h3>
          <p>RFC 3161 cryptographic timestamps and SHA-256 hashes ensure authenticity for legal proceedings</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <!-- Bolt SVG -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="24" height="24">
              <path d="M13 2L3 14h7v8l10-12h-7z"/>
            </svg>
          </div>
          <h3>Instant PDF Reports</h3>
          <p>Automatically captures pricing tooltips and generates professional PDF documentation in under 60 seconds</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <!-- Pin SVG -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="24" height="24">
              <path d="M12 2C8.14 2 5 5.14 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.86-3.14-7-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"/>
            </svg>
          </div>
          <h3>Geolocation Spoofing</h3>
          <p>Simulates browsing from Oregon CW locations with GPS coordinates and ZIP codes</p>
        </div>
      </div>

      <div class="history-section">
        <a href="/history" class="history-link">
          <span class="feature-icon" style="background:none;">
            <!-- Clipboard SVG -->
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="20" height="20">
              <path d="M17 3h-2.18A3 3 0 0012 1a3 3 0 00-2.82 2H7a2 2 0 00-2 2v16a2 2 0 002 2h10a2 2 0 002-2V5a2 2 0 00-2-2zM12 3a1 1 0 11-1 1 1 1 0 011-1zm5 18H7V5h2.18a3 3 0 005.64 0H17z"/>
            </svg>
          </span>
          View Capture History
        </a>
      </div>

      <!-- Keep your how-it-works section unchanged -->
    </section>
  </main>

  <footer>
    <div class="container">
      © 2025 CW Compliance Tool · Internal Use Only · v4.1 · Geolocation Enabled
      <br>
      <a href="/admin" style="font-family: 'Courier New', monospace; font-size: 11px; color: #9ca3af; text-decoration: none; margin-top: 8px; display: inline-block;">admin</a>
    </div>
  </footer>

  <script>
    const form = document.getElementById('captureForm');
    const submitBtn = document.getElementById('submitBtn');
    const loading = document.getElementById('loading');

    form.addEventListener('submit', async function(e) {
      e.preventDefault();

      submitBtn.disabled = true;
      submitBtn.textContent = 'Processing...';
      loading.classList.add('active');

      const formData = new FormData(form);
      try {
        const response = await fetch(form.action, {
          method: 'POST',
          body: formData
        });

        const result = await response.json();

        if (result.success) {
          alert('Capture completed successfully.');
        } else {
          alert('Capture failed: ' + (result.error || 'Unknown error'));
        }
      } catch (error) {
        console.error('Error during capture:', error);
        alert('An unexpected error occurred.');
      } finally {
        loading.classList.remove('active');
        submitBtn.disabled = false;
        submitBtn.textContent = 'Run Capture';
      }
    });

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  </script>
</body>
</html>
