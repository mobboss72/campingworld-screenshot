<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CW Compliance Capture Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --text-primary: #1d1d1f;
      --text-secondary: #6e6e73;
      --bg-primary: #fbfbfd;
      --bg-card: #ffffff;
      --accent: #0071e3;
      --accent-hover: #0077ed;
      --border: rgba(0, 0, 0, 0.06);
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
      --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
      --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --text-primary: #f5f5f7;
        --text-secondary: #a1a1a6;
        --bg-primary: #000000;
        --bg-card: #1d1d1f;
        --accent: #0a84ff;
        --accent-hover: #409cff;
        --border: rgba(255, 255, 255, 0.1);
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
        --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
        --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
      }
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .container {
      max-width: 980px;
      margin: 0 auto;
      padding: 0 22px;
    }

    /* Header */
    header {
      background: var(--bg-card);
      backdrop-filter: saturate(180%) blur(20px);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 100;
      padding: 16px 0;
    }

    header .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 21px;
      font-weight: 600;
      letter-spacing: -0.02em;
      color: var(--text-primary);
    }

    .nav-links {
      display: flex;
      gap: 32px;
      align-items: center;
    }

    .nav-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 14px;
      font-weight: 400;
      transition: color 0.2s ease;
    }

    .nav-links a:hover {
      color: var(--text-primary);
    }

    /* Hero Section */
    .hero {
      text-align: center;
      padding: 80px 0 60px;
    }

    h1 {
      font-size: 56px;
      font-weight: 700;
      letter-spacing: -0.02em;
      line-height: 1.1;
      margin-bottom: 16px;
      background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 24px;
      font-weight: 400;
      color: var(--text-secondary);
      margin-bottom: 48px;
      max-width: 640px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Feature Cards */
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 60px;
    }

    .feature-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 32px 28px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .feature-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
      border-color: var(--accent);
    }

    .feature-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      margin-bottom: 20px;
    }

    .feature-card h3 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 12px;
      letter-spacing: -0.01em;
    }

    .feature-card p {
      font-size: 15px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    /* Capture Form */
    .capture-section {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 24px;
      padding: 48px;
      margin-bottom: 60px;
      box-shadow: var(--shadow-md);
    }

    .capture-section h2 {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 12px;
      letter-spacing: -0.015em;
    }

    .section-description {
      color: var(--text-secondary);
      font-size: 17px;
      margin-bottom: 36px;
      line-height: 1.5;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    label {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-primary);
      letter-spacing: -0.01em;
    }

    select, input[type="text"] {
      padding: 14px 16px;
      font-size: 17px;
      font-family: inherit;
      background: var(--bg-primary);
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text-primary);
      transition: all 0.2s ease;
      -webkit-appearance: none;
      appearance: none;
    }

    select {
      background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%236e6e73' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
      padding-right: 44px;
    }

    select:focus, input[type="text"]:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1);
    }

    button {
      background: var(--accent);
      color: white;
      font-size: 17px;
      font-weight: 500;
      padding: 16px 32px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
      letter-spacing: -0.01em;
    }

    button:hover:not(:disabled) {
      background: var(--accent-hover);
      transform: translateY(-1px);
      box-shadow: 0 8px 16px rgba(0, 113, 227, 0.3);
    }

    button:active:not(:disabled) {
      transform: translateY(0);
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .loading {
      display: none;
      text-align: center;
      padding: 24px;
      color: var(--text-secondary);
      font-size: 15px;
    }

    .loading.active {
      display: block;
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .spinner {
      width: 24px;
      height: 24px;
      border: 3px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      display: inline-block;
      margin-right: 12px;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* History Link */
    .history-section {
      text-align: center;
      margin-bottom: 60px;
    }

    .history-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      color: var(--text-primary);
      text-decoration: none;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .history-link:hover {
      border-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    /* How It Works */
    .how-it-works {
      margin-bottom: 60px;
    }

    .how-it-works h2 {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 40px;
      text-align: center;
      letter-spacing: -0.015em;
    }

    .steps {
      display: grid;
      gap: 32px;
    }

    .step {
      display: grid;
      grid-template-columns: 60px 1fr;
      gap: 24px;
      align-items: start;
    }

    .step-number {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .step-content h3 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 8px;
      letter-spacing: -0.01em;
    }

    .step-content p {
      color: var(--text-secondary);
      font-size: 15px;
      line-height: 1.6;
    }

    /* Footer */
    footer {
      background: var(--bg-card);
      border-top: 1px solid var(--border);
      padding: 32px 0;
      margin-top: 80px;
    }

    footer .container {
      text-align: center;
      color: var(--text-secondary);
      font-size: 13px;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .container {
        padding: 0 20px;
      }

      h1 {
        font-size: 48px;
      }

      .subtitle {
        font-size: 21px;
      }

      .features {
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      }
    }

    @media (max-width: 768px) {
      header {
        padding: 12px 0;
      }

      header .container {
        flex-direction: column;
        gap: 12px;
      }

      .logo {
        font-size: 18px;
      }

      .nav-links {
        gap: 16px;
        font-size: 13px;
      }

      h1 {
        font-size: 36px;
      }

      .subtitle {
        font-size: 18px;
        margin-bottom: 40px;
      }

      .hero {
        padding: 40px 0 32px;
      }

      .capture-section {
        padding: 32px 20px;
        border-radius: 20px;
      }

      .capture-section h2 {
        font-size: 28px;
      }

      .section-description {
        font-size: 15px;
      }

      .features {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .feature-card {
        padding: 24px 20px;
      }

      .feature-icon {
        width: 44px;
        height: 44px;
        font-size: 22px;
      }

      .feature-card h3 {
        font-size: 18px;
      }

      .feature-card p {
        font-size: 14px;
      }

      .how-it-works h2 {
        font-size: 28px;
      }

      .step {
        grid-template-columns: 50px 1fr;
        gap: 16px;
      }


      .step-number {
        width: 50px;
        height: 50px;
        font-size: 20px;
      }

      .step-content h3 {
        font-size: 18px;
      }

      .step-content p {
        font-size: 14px;
      }

      select, input[type="text"] {
        padding: 12px 14px;
        font-size: 16px;
      }

      button {
        padding: 14px 28px;
        font-size: 16px;
      }

      footer {
        margin-top: 60px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 0 16px;
      }

      h1 {
        font-size: 32px;
      }

      .subtitle {
        font-size: 16px;
      }

      .hero {
        padding: 32px 0 24px;
      }

      .capture-section {
        padding: 24px 16px;
        border-radius: 16px;
      }

      .capture-section h2 {
        font-size: 24px;
      }

      .feature-card {
        padding: 20px 16px;
        border-radius: 16px;
      }

      .how-it-works h2 {
        font-size: 24px;
        margin-bottom: 32px;
      }

      .steps {
        gap: 24px;
      }

      .step {
        grid-template-columns: 44px 1fr;
        gap: 12px;
      }

      .step-number {
        width: 44px;
        height: 44px;
        font-size: 18px;
      }

      .step-content h3 {
        font-size: 17px;
      }

      .step-content p {
        font-size: 13px;
      }

      .history-link {
        padding: 10px 20px;
        font-size: 14px;
      }

      form {
        gap: 20px;
      }

      label {
        font-size: 13px;
      }

      select, input[type="text"] {
        padding: 11px 13px;
        font-size: 16px;
        border-radius: 10px;
      }

      select {
        background-position: right 12px center;
        padding-right: 38px;
      }

      button {
        padding: 13px 24px;
        font-size: 15px;
        border-radius: 10px;
      }

      .loading {
        padding: 20px;
        font-size: 14px;
      }

      .spinner {
        width: 20px;
        height: 20px;
        margin-right: 10px;
      }

      footer {
        padding: 24px 0;
        margin-top: 48px;
      }

      footer .container {
        font-size: 12px;
      }
    }

    /* Extra small devices */
    @media (max-width: 360px) {
      h1 {
        font-size: 28px;
      }

      .subtitle {
        font-size: 15px;
      }

      .capture-section h2 {
        font-size: 22px;
      }

      .feature-card h3,
      .step-content h3 {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">CW Compliance</div>
      <nav class="nav-links">
        <a href="#how-it-works">How It Works</a>
        <a href="/history">History</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="container">
      <div class="capture-section">
        <h2>Run Capture</h2>
        <p class="section-description">Enter a CW RV stock number and select your location. The system will spoof GPS coordinates and ZIP codes to match the selected CW location, then capture pricing details with full legal documentation including cryptographic timestamps.</p>

        <form method="POST" action="/capture" id="captureForm">
          <div class="form-group">
            <label for="location">CW Location</label>
            <select name="location" id="location" required>
              <option value="bend">Bend, OR (97701)</option>
              <option value="eugene">Eugene, OR (97402)</option>
              <option value="hillsboro">Hillsboro, OR (97124)</option>
              <option value="medford">Medford, OR (97504)</option>
              <option value="portland" selected>Portland, OR (97201)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="stock">Stock Number</label>
            <input type="text" name="stock" id="stock" placeholder="2607628P" required pattern="[a-zA-Z0-9]+" title="Please enter a stock number (e.g., 2607628P)">
          </div>
          
          <button type="submit" id="submitBtn">Run Capture</button>
        </form>

        <div class="loading" id="loading">
          <span class="spinner"></span>
          Capturing screenshots and generating PDF... This may take 30-60 seconds.
        </div>
      </div>

      <div class="features">
        <div class="feature-card">
          <div class="feature-icon">🔒</div>
          <h3>Legally Verifiable</h3>
          <p>RFC 3161 cryptographic timestamps and SHA-256 hashes ensure authenticity for legal proceedings</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">⚡</div>
          <h3>Instant PDF Reports</h3>
          <p>Automatically captures pricing tooltips and generates professional PDF documentation in under 60 seconds</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">📍</div>
          <h3>Geolocation Spoofing</h3>
          <p>Accurately simulates browsing from any of 5 Oregon CW locations with GPS coordinates and ZIP codes</p>
        </div>
      </div>

      <div class="history-section">
        <a href="/history" class="history-link">
          <span>📋</span>
          View Capture History
        </a>
      </div>

      <div class="how-it-works" id="how-it-works">
        <h2>How It Works</h2>
        <div class="steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>Location Simulation</h3>
              <p>Select one of 5 Oregon CW locations. The system spoofs browser geolocation with precise GPS coordinates (latitude/longitude) and injects the corresponding ZIP code. This ensures the CW website detects the correct location and displays accurate regional pricing, financing terms, and availability.</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>Automated Screenshot Capture</h3>
              <p>A headless Chromium browser navigates to the listing and automatically triggers pricing tooltips. Full-page screenshots capture both the total price breakdown (MSRP, discounts, fees) and estimated payment details including APR, loan term, down payment, and monthly payment amount.</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>Cryptographic Timestamping</h3>
              <p>Each screenshot receives an RFC 3161 cryptographic timestamp from trusted Time Stamping Authorities (DigiCert, Apple, Starfield, or GlobalSign). This provides legally admissible proof of when the capture occurred and generates SHA-256 hashes to verify file integrity.</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">4</div>
            <div class="step-content">
              <h3>Professional PDF Generation</h3>
              <p>The system compiles both screenshots side-by-side in a comprehensive PDF report including all metadata, timestamps, verification hashes, and capture details. The PDF automatically downloads to your computer as the permanent legal record.</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">5</div>
            <div class="step-content">
              <h3>Database Audit Trail</h3>
              <p>All capture metadata is stored in a secure database for future reference. While screenshots are automatically cleaned up after 7 days to prevent storage bloat, the audit trail with hashes and timestamps remains permanently accessible.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      © 2025 CW Compliance Tool · Internal Use Only · v4.1 · Geolocation Enabled
      <br>
      <a href="/admin" style="font-family: 'Courier New', monospace; font-size: 11px; color: #9ca3af; text-decoration: none; margin-top: 8px; display: inline-block;">admin</a>
    </div>
  </footer>

  <script>
    const form = document.getElementById('captureForm');
    const submitBtn = document.getElementById('submitBtn');
    const loading = document.getElementById('loading');

    form.addEventListener('submit', function(e) {
      submitBtn.disabled = true;
      submitBtn.textContent = 'Processing...';
      loading.classList.add('active');
    });

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  </script>
</body>
</html>
